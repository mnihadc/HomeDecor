<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Untree.co">
    <link rel="shortcut icon" href="favicon.png">

    <meta name="description" content="iStore - The best place to shop Apple products online." />
    <meta name="keywords" content="Apple, iPhone, MacBook, iPad, accessories, online store" />

    <!-- Bootstrap CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="css/tiny-slider.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <title>iStore - Apple Products</title>
</head>

<body>

    <!-- Start Hero Section -->
    <div class="hero">
        <div class="container">
            <div class="row align-items-center justify-content-between">
                <div class="bubble bubble-1"></div>
                <div class="col-lg-5">
                    <div class="intro-excerpt">
                        <h1>Welcome to iStore! <span class="d-block highlight">Experience Apple Like Never Before</span>
                        </h1>
                        <p class="mb-4">
                            Discover the latest Apple products—from iPhones to MacBooks—all in one place. Enjoy premium
                            quality, exclusive deals, and seamless shopping for everything Apple.
                        </p>
                        <p>
                            <a href="/shop" class="btn btn-secondary btn-hover me-2">Shop Now</a>
                            {{#if user}}
                            <a href="/profile/user" class="btn btn-white-outline btn-hover">Profile</a>
                            {{else}}
                            <a href="/auth/login" class="btn btn-white-outline btn-hover">Login</a>
                            {{/if}}
                        </p>
                    </div>
                </div>
                <div class="col-lg-7">
                    <div class="hero-img-wrap">
                        <div class="bubble bubble-2"></div>
                        <div class="bubble bubble-3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Hero Section -->

    <!-- Product display -->
    <div class="product-section">
        <div class="container">
            <div class="row">
                {{#each products}}
                <div class="col-12 col-md-4 col-lg-3 mb-5 mb-md-0">
                    <div class="product-item">
                        <!-- Link the image to the view product page -->
                        <a href="/product-view/{{this._id}}">
                            <img src="{{this.productImages}}" class="img-fluid product-thumbnail" alt="{{this.name}}">
                        </a>
                        <!-- Optionally, make the product title clickable too -->
                        <a href="/product-view/{{this._id}}" style="text-decoration: none;">
                            <h3 class="product-title" style="color: black;">{{this.name}}</h3>
                        </a>
                        <strong class="product-price">
                            {{#if this.offerPrice}}
                            <span class="product-price-old">₹{{this.offerPrice}}</span>
                            {{else}}
                            ₹{{this.price}}
                            {{/if}}
                        </strong>
                        <button class="add-to-cart-btn" style="border-radius: 7px; border: silver 1px; color: green;"
                            data-product-id="{{this._id}}">
                            Add to Cart
                        </button>
                    </div>
                </div>
                {{/each}}
            </div>
        </div>
    </div>
    <!-- End Product Display -->

    <!-- Start Why Choose Us Section -->
    <div class="why-choose-section">
        <div class="container">
            <div class="row justify-content-between">
                <div class="col-lg-6">
                    <h2 class="section-title">Why Choose iStore?</h2>
                    <p>Experience the best of Apple products, premium customer service, and fast, reliable delivery.</p>

                    <div class="row my-5">
                        <div class="col-6 col-md-6">
                            <div class="feature">
                                <div class="icon">
                                    <img src="images/truck.svg" alt="Image" class="imf-fluid">
                                </div>
                                <h3>Fast &amp; Free Shipping</h3>
                                <p>Get your Apple products delivered quickly and for free on select orders.</p>
                            </div>
                        </div>

                        <div class="col-6 col-md-6">
                            <div class="feature">
                                <div class="icon">
                                    <img src="images/bag.svg" alt="Image" class="imf-fluid">
                                </div>
                                <h3>Easy to Shop</h3>
                                <p>Browse, select, and checkout with ease. A smooth shopping experience for every Apple
                                    product.</p>
                            </div>
                        </div>

                        <div class="col-6 col-md-6">
                            <div class="feature">
                                <div class="icon">
                                    <img src="images/support.svg" alt="Image" class="imf-fluid">
                                </div>
                                <h3>24/7 Support</h3>
                                <p>Our team is available round the clock to assist you with any queries or issues.</p>
                            </div>
                        </div>

                        <div class="col-6 col-md-6">
                            <div class="feature">
                                <div class="icon">
                                    <img src="images/return.svg" alt="Image" class="imf-fluid">
                                </div>
                                <h3>Hassle-Free Returns</h3>
                                <p>Easy returns on all Apple products within a set period. We make returns simple and
                                    stress-free.</p>
                            </div>
                        </div>

                    </div>
                </div>

                <div class="col-lg-5">
                    <div class="img-wrap">
                        <img src="https://w0.peakpx.com/wallpaper/739/881/HD-wallpaper-vivid-apple-logo-3d-bright-icon-iphone-symbol.jpg"
                            alt="Image" class="img-fluid">
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!-- End Why Choose Us Section -->

    <!-- Start We Help Section -->
    <div class="we-help-section">
        <div class="container">
            <div class="row justify-content-between">
                <div class="col-lg-7 mb-5 mb-lg-0">
                    <div class="imgs-grid">
                        <div class="grid grid-1"><img
                                src="https://media.ldlc.com/r1600/ld/products/00/05/97/75/LD0005977510_0005977530_0005977559_0005977597.jpg"
                                alt="Apple products"></div>
                        <div class="grid grid-2"><img
                                src="https://bsmedia.business-standard.com/_media/bs/img/article/2023-04/19/full/1681906782-4556.jpg"
                                alt="Apple accessories"></div>
                        <div class="grid grid-3"><img
                                src="https://llounge.in/wp-content/uploads/2023/12/iPhone-accessories-store-in-Kolkata.webp"
                                alt="Apple shopping"></div>
                    </div>
                </div>
                <div class="col-lg-5 ps-lg-5">
                    <h2 class="section-title mb-4">We Help You Choose the Best Apple Products</h2>
                    <p>Explore our exclusive collection of iPhones, MacBooks, iPads, and accessories. We assist you in
                        making the best choice for your Apple experience.</p>

                    <ul class="list-unstyled custom-list my-4">
                        <li>Latest iPhones with cutting-edge technology</li>
                        <li>MacBooks with unmatched performance</li>
                        <li>iPads for both work and play</li>
                        <li>Apple Accessories for every need</li>
                    </ul>
                    <p><a href="/shop" class="btn">Explore Our Collection</a></p>
                </div>
            </div>
        </div>
    </div>
    <!-- End We Help Section -->

    <!-- Start Popular Product -->
    <div class="popular-product">
        <div class="container">
            <div class="row">
                <div class="col-12 col-md-6 col-lg-4 mb-4 mb-lg-0">
                    <div class="product-item-sm d-flex">
                        <div class="thumbnail">
                            <img src="https://d2xamzlzrdbdbn.cloudfront.net/imagesrewamp/Brand-Logos/70a28ece-798b-44be-b3b1-e98ea9010b7124131208.jpg"
                                alt="iPhone 15" class="img-fluid">
                        </div>
                        <div class="pt-3">
                            <h3>iPhone 16</h3>
                            <p>The latest iPhone with stunning features and advanced performance.</p>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-lg-4 mb-4 mb-lg-0">
                    <div class="product-item-sm d-flex">
                        <div class="thumbnail">
                            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS4H8BWeAVxvq2Hjzgk3Et4p2OViH6kn7Y8wQ&s"
                                alt="MacBook Pro" class="img-fluid">
                        </div>
                        <div class="pt-3">
                            <h3>MacBook Pro</h3>
                            <p>Powerful performance with the latest Apple Silicon chip.</p>

                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6 col-lg-4 mb-4 mb-lg-0">
                    <div class="product-item-sm d-flex">
                        <div class="thumbnail">
                            <img src="https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/refurb-45-stainless-gold-sport-band-clay-s9?wid=1144&hei=1144&fmt=jpeg&qlt=90&.v=1709329401415"
                                alt="Apple Watch Ultra" class="img-fluid">
                        </div>
                        <div class="pt-3">
                            <h3>Apple Watch Ultra</h3>
                            <p>Stay connected and track your fitness with the all-new Apple Watch Ultra.</p>

                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!-- End Popular Product Section -->

    <!-- Start Footer -->
    <footer class="bg-dark text-light py-4">
        <div class="container">
            <div class="row justify-content-between">
                <div class="col-md-6">
                    <p>&copy; 2024 iStore. All rights reserved.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <a href="#" class="text-light me-3">Terms & Conditions</a>
                    <a href="#" class="text-light">Privacy Policy</a>
                </div>
            </div>
        </div>
    </footer>
    <!-- End Footer -->

    <!-- Bootstrap JS -->
    <script src="js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="js/main.js"></script>
</body>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const productSection = document.querySelector('.product-section');

        // Attach event listener to the parent container (productSection)
        productSection.addEventListener('click', function (e) {
            // Check if the clicked element is a "Add to Cart" button
            if (e.target && e.target.classList.contains('add-to-cart-btn')) {
                const productId = e.target.getAttribute("data-product-id");

                fetch(`/cart/addtocart/${productId}`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                })
                    .then(response => response.json().then(data => ({ status: response.status, message: data.message })))
                    .then(({ status, message }) => {
                        if (status === 201) {
                            alert(message); // Item added successfully
                        } else if (status === 400) {
                            alert("Item is already in cart.");
                        } else if (status === 401) {
                            alert("Please log in to add items to the cart.");
                            window.location.href = "/auth/login";
                        } else {
                            alert("An unexpected error occurred.");
                        }
                    })
                    .catch(error => {
                        console.error("Error adding to cart:", error);
                        alert("An error occurred. Please try again later.");
                    });
            }
        });
    });

</script>

</html>